(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,t,n){e.exports=n(43)},43:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),o=n.n(c),u=(n(9),n(2)),s=n.n(u),i=n(19),l=n(7),m=n(3),b=function(e){return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:e.value,onChange:e.onChange}))},f=function(e){return r.a.createElement("form",{onSubmit:e.onSubmit},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:e.name,onChange:e.onNameChange})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:e.number,onChange:e.onNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Add")))},d=function(e){return r.a.createElement("div",null,e.persons.map((function(t){return r.a.createElement("div",{key:t.name},t.name,": ",t.number,"\xa0",r.a.createElement("button",{onClick:function(){return e.onDeleteButtonClick(t)}},"Delete"))})))},p=function(e){var t=e.message,n=e.state;return t&&n?r.a.createElement("div",{className:n},t):null},h=n(5),v=n.n(h),g="/api/persons",k=function(){return v.a.get(g)},E=function(e){return v.a.post(g,e)},w=function(e,t){return v.a.put("".concat(g,"/").concat(e),t)},x=function(e){return v.a.delete("".concat(g,"/").concat(e))},O=function(){var e=Object(a.useState)([]),t=Object(m.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),u=Object(m.a)(o,2),h=u[0],v=u[1],g=Object(a.useState)(""),O=Object(m.a)(g,2),j=O[0],C=O[1],S=Object(a.useState)(""),y=Object(m.a)(S,2),N=y[0],D=y[1],B=Object(a.useState)({message:void 0,state:void 0}),F=Object(m.a)(B,2),L=F[0],A=F[1],J=function(e){A(e),setTimeout((function(){A({message:void 0,state:void 0})}),5e3)},I=function(){var e=Object(l.a)(s.a.mark((function e(t){var a,r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=Object(i.a)(n),!(r=a.find((function(e){return e.name.toLowerCase()===h.toLowerCase()})))){e.next=21;break}if(r.number!==j){e.next=8;break}J({message:"".concat(h," is already added to phonebook."),state:"error"}),e.next=19;break;case 8:if(!window.confirm("".concat(h," is already in the phonebook, replace number?"))){e.next=19;break}return e.prev=9,e.next=12,w(r.id,{name:h,number:j});case 12:M(),J({message:"".concat(h," is updated in the phonebook."),state:"success"}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),J({message:"Failed to update ".concat(h),state:"error"});case 19:e.next=33;break;case 21:return e.prev=21,e.next=24,E({name:h,number:j});case 24:o=e.sent,a.push(o.data),c(a),J({message:"".concat(h," is added in the phonebook."),state:"success"}),e.next=33;break;case 30:e.prev=30,e.t1=e.catch(21),J({message:"Failed to add ".concat(h,"."),state:"error"});case 33:case"end":return e.stop()}}),e,null,[[9,16],[21,30]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:t=e.sent,c(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){M()}),[]);var P=function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Delete ".concat(t.name,"?"))){e.next=11;break}return e.prev=1,e.next=4,x(t.id);case 4:M(),J({message:"".concat(t.name," is deleted in the phonebook."),state:"success"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),J({message:"Failed to delete ".concat(t.name,". Refresh to get the latest phonebook list."),state:"error"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),R=""===N.trim()?n:n.filter((function(e){return e.name.toLowerCase().indexOf(N)>-1}));return r.a.createElement("div",null,r.a.createElement(p,{message:L.message,state:L.state}),r.a.createElement("h2",null,"Phonebook"),r.a.createElement(b,{value:N,onChange:function(e){D(e.target.value)}}),r.a.createElement("h3",null,"Add a new"),r.a.createElement(f,{onSubmit:I,name:h,number:j,onNameChange:function(e){v(e.target.value)},onNumberChange:function(e){C(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(d,{persons:R,onDeleteButtonClick:P}))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root"))},9:function(e,t,n){}},[[20,1,2]]]);
//# sourceMappingURL=main.893f1dd0.chunk.js.map